<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rasoa Pro - V2</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel pour JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; padding: 0; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .bg-gradient-custom {
            background: linear-gradient(135deg, #f8fafc 0%, #eef2ff 100%);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .animated-blob {
            position: fixed;
            width: 500px;
            height: 500px;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.4;
            animation: move 20s infinite alternate;
        }
        @keyframes move {
            from { transform: translate(-10%, -10%) scale(1); }
            to { transform: translate(20%, 20%) scale(1.1); }
        }
    </style>
</head>
<body class="bg-gradient-custom min-h-screen">
    <div id="root"></div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc, serverTimestamp, query } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";

        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.FirebaseSDK = {
            auth, db, collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc, serverTimestamp, query,
            signInAnonymously, signInWithCustomToken, onAuthStateChanged,
            isReady: true
        };
    </script>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const Icons = {
            ShoppingCart: ({size=24, className=""}) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/>
                    <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/>
                </svg>
            ),
            Truck: ({size=24, className=""}) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M10 17h4V5H2v12h3m9 0h2l3-3V5h-5v12Z"/><circle cx="7.5" cy="17.5" r="2.5"/><circle cx="17.5" cy="17.5" r="2.5"/>
                </svg>
            ),
            Users: ({size=24, className=""}) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
            ),
            Wallet: ({size=24, className=""}) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"/><path d="M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"/>
                </svg>
            ),
            Trash2: ({size=24, className=""}) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2m-6 9v4m4-4v4"/>
                </svg>
            ),
            ChevronRight: ({size=24, className=""}) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="m9 18 6-6-6-6"/>
                </svg>
            ),
            Plus: ({size=24, className=""}) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M12 5v14m-7-7h14"/>
                </svg>
            ),
            Facebook: ({size=24, className=""}) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className}>
                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
            ),
            TikTok: ({size=24, className=""}) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className}>
                    <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.06 3.43-.01 6.86-.02 10.29-.01 1.97-.74 3.92-2.12 5.29-1.71 1.69-4.55 2.11-6.72 1.17-2.21-.98-3.66-3.44-3.32-5.81.15-2.1 1.74-3.94 3.7-4.55.03.12.06.25.08.38-1.28.47-2.13 1.81-2.04 3.17.1 1.5.97 2.87 2.31 3.49 1.3.61 2.92.34 3.94-.68 1.05-1.03 1.38-2.61 1.34-4.04-.01-4.69-.01-9.39-.01-14.08-.12-.01-.24-.01-.36-.01z"/>
                </svg>
            )
        };

        const LOGO_URL = "https://lh3.googleusercontent.com/u/0/d/14wx6DlgO3bZ6rSIhQQz6wRzlLrBgwNAp=w1000-h1000";
        const APP_ID = typeof __app_id !== 'undefined' ? __app_id : '4j6V8WyZ0nA0ENdfY5eF';

        // Composant pour afficher uniquement l'icône de la source
        function SourceIcon({ source, size=20 }) {
            if (source === 'TikTok') {
                return <Icons.TikTok size={size} className="text-black drop-shadow-sm" />;
            }
            return <Icons.Facebook size={size} className="text-[#1877F2] drop-shadow-sm" />;
        }

        function App() {
            const [user, setUser] = useState(null);
            const [isAdmin, setIsAdmin] = useState(false);
            const [activeTab, setActiveTab] = useState("commandes");
            const [loading, setLoading] = useState(true);
            const [showClientForm, setShowClientForm] = useState(false);

            const [clients, setClients] = useState([]);
            const [livraisons, setLivraisons] = useState([]);
            const [depenses, setDepenses] = useState([]);

            const [searchTerm, setSearchTerm] = useState("");
            const [orderForm, setOrderForm] = useState({ nom: "", telephone: "", montant: "", lieu: "", source: "Facebook", remarque: "", isColis: false });
            const [clientForm, setClientForm] = useState({ nom: "", telephone: "", lieu: "", source: "Facebook" });
            const [depenseForm, setDepenseForm] = useState({ motif: "", montant: "" });

            // Initialisation Auth & Temps réel via Firebase
            useEffect(() => {
                const initAuth = async () => {
                    const checkSDK = setInterval(async () => {
                        if (window.FirebaseSDK?.isReady) {
                            clearInterval(checkSDK);
                            const { auth, signInWithCustomToken, signInAnonymously, onAuthStateChanged } = window.FirebaseSDK;
                            try {
                                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                                    await signInWithCustomToken(auth, __initial_auth_token);
                                } else {
                                    await signInAnonymously(auth);
                                }
                            } catch (e) { console.error(e); }
                            onAuthStateChanged(auth, (u) => { 
                                setUser(u); 
                                setLoading(false); 
                            });
                        }
                    }, 100);
                };
                initAuth();
            }, []);

            // Écouteurs Firestore en temps réel
            useEffect(() => {
                if (!user || !window.FirebaseSDK?.isReady) return;
                const { db, collection, onSnapshot } = window.FirebaseSDK;
                const getRef = (col) => collection(db, 'artifacts', APP_ID, 'public', 'data', col);
                
                // OnSnapshot garantit le temps réel
                const unsubLiv = onSnapshot(getRef('livraisons'), (s) => setLivraisons(s.docs.map(d => ({ id: d.id, ...d.data() }))), (err) => console.error(err));
                const unsubCli = onSnapshot(getRef('clients'), (s) => setClients(s.docs.map(d => ({ id: d.id, ...d.data() }))), (err) => console.error(err));
                const unsubDep = onSnapshot(getRef('depenses'), (s) => setDepenses(s.docs.map(d => ({ id: d.id, ...d.data() }))), (err) => console.error(err));
                
                return () => { unsubLiv(); unsubCli(); unsubDep(); };
            }, [user]);

            const stats = useMemo(() => {
                const totalVentes = livraisons.filter(l => l.statut === "Livré").reduce((acc, curr) => acc + (Number(curr.montant) || 0), 0);
                const totalDepenses = depenses.reduce((acc, curr) => acc + (Number(curr.montant) || 0), 0);
                return { entrees: totalVentes, depenses: totalDepenses, solde: totalVentes - totalDepenses };
            }, [livraisons, depenses]);

            const filteredClients = useMemo(() => {
                if (!searchTerm) return [];
                const s = searchTerm.toLowerCase();
                return clients.filter(c => (c.nom && c.nom.toLowerCase().includes(s)) || (c.telephone && c.telephone.includes(s)));
            }, [searchTerm, clients]);

            const addOrder = async () => {
                if (!user || !orderForm.nom || !orderForm.montant) return;
                const { db, collection, addDoc, serverTimestamp } = window.FirebaseSDK;
                try {
                    await addDoc(collection(db, 'artifacts', APP_ID, 'public', 'data', 'livraisons'), {
                        ...orderForm, montant: Number(orderForm.montant), statut: "Préparation", timestamp: serverTimestamp(),
                        date: new Date().toLocaleDateString('fr-FR'), userId: user.uid
                    });
                    if (!clients.some(c => c.telephone === orderForm.telephone)) {
                        await addDoc(collection(db, 'artifacts', APP_ID, 'public', 'data', 'clients'), {
                            nom: orderForm.nom, telephone: orderForm.telephone, lieu: orderForm.lieu, source: orderForm.source, userId: user.uid
                        });
                    }
                    setOrderForm({ nom: "", telephone: "", montant: "", lieu: "", source: "Facebook", remarque: "", isColis: false });
                    setActiveTab("livraisons");
                } catch(e) { console.error(e); }
            };

            const addManualClient = async () => {
                if (!user || !clientForm.nom || !clientForm.telephone) return;
                const { db, collection, addDoc } = window.FirebaseSDK;
                await addDoc(collection(db, 'artifacts', APP_ID, 'public', 'data', 'clients'), { ...clientForm, userId: user.uid });
                setClientForm({ nom: "", telephone: "", lieu: "", source: "Facebook" });
                setShowClientForm(false);
            };

            const addDepense = async () => {
                if (!user || !depenseForm.motif || !depenseForm.montant) return;
                const { db, collection, addDoc, serverTimestamp } = window.FirebaseSDK;
                await addDoc(collection(db, 'artifacts', APP_ID, 'public', 'data', 'depenses'), { 
                    ...depenseForm, montant: Number(depenseForm.montant), timestamp: serverTimestamp(), date: new Date().toLocaleDateString('fr-FR'), userId: user.uid 
                });
                setDepenseForm({ motif: "", montant: "" });
            };

            const updateStatus = async (id, current) => {
                if (!user) return;
                const { db, doc, updateDoc } = window.FirebaseSDK;
                const next = current === "Préparation" ? "Livraison" : "Livré";
                await updateDoc(doc(db, 'artifacts', APP_ID, 'public', 'data', 'livraisons', id), { statut: next });
            };

            const deleteItem = async (col, id) => {
                if (!user) return;
                const { db, doc, deleteDoc } = window.FirebaseSDK;
                await deleteDoc(doc(db, 'artifacts', APP_ID, 'public', 'data', col, id));
            };

            if (loading) return (
                <div className="flex items-center justify-center min-h-screen bg-white">
                    <div className="w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"></div>
                </div>
            );

            if (!isAdmin) return (
                <div className="flex items-center justify-center min-h-screen p-4 relative overflow-hidden bg-white">
                    <div className="fixed top-6 right-6 z-50">
                        <button onClick={() => setIsAdmin(true)} className="group flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-full text-[11px] font-black uppercase tracking-widest transition-all shadow-xl active:scale-90">
                            Tableau de Bord <Icons.ChevronRight size={14}/>
                        </button>
                    </div>
                    <div className="animated-blob bg-indigo-100 top-[-10%] left-[-10%]"></div>
                    <div className="animated-blob bg-sky-100 bottom-[-10%] right-[-10%]"></div>
                    <div className="text-center relative z-10">
                        <img src={LOGO_URL} className="w-32 h-32 rounded-full mx-auto mb-10 object-cover border-8 border-white shadow-2xl" />
                        <h1 className="font-black text-5xl text-slate-900 mb-2 uppercase tracking-tighter">Rasoa <span className="text-indigo-600">Pro</span></h1>
                        <p className="text-slate-400 font-bold text-xs uppercase tracking-[0.3em]">Gestion Commerciale Premium</p>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen flex flex-col pb-20 bg-slate-50/50">
                    <nav className="glass-card px-6 h-20 flex items-center justify-between sticky top-0 z-50 border-b">
                        <div className="flex items-center gap-3">
                            <img src={LOGO_URL} className="w-10 h-10 rounded-full" />
                            <h1 className="font-black text-lg tracking-tighter uppercase">Rasoa <span className="text-indigo-600">Pro</span></h1>
                        </div>
                        <button onClick={() => setIsAdmin(false)} className="text-[10px] font-black uppercase border-2 px-5 py-2 rounded-full">Quitter</button>
                    </nav>

                    <div className="glass-card border-b sticky top-20 z-40 flex overflow-x-auto no-scrollbar">
                        <div className="max-w-5xl mx-auto flex">
                            {[
                                {id: 'commandes', label: 'Vente', icon: Icons.ShoppingCart}, 
                                {id: 'livraisons', label: 'Suivi', icon: Icons.Truck}, 
                                {id: 'finances', label: 'Finances', icon: Icons.Wallet}, 
                                {id: 'clients', label: 'Clients', icon: Icons.Users}
                            ].map(t => (
                                <button key={t.id} onClick={() => setActiveTab(t.id)} className={`px-8 py-5 border-b-4 font-black text-[10px] uppercase transition-all flex items-center gap-2 ${activeTab === t.id ? 'border-indigo-600 text-indigo-600 bg-white' : 'border-transparent text-slate-400'}`}>
                                    <t.icon size={16} /> {t.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    <main className="max-w-5xl mx-auto w-full p-4 md:p-8">
                        {activeTab === 'commandes' && (
                            <div className="max-w-lg mx-auto glass-card rounded-[3rem] p-10 shadow-2xl space-y-6">
                                <h2 className="text-2xl font-black uppercase text-center text-slate-800">Encaisser</h2>
                                <div className="relative">
                                    <input value={searchTerm} onChange={e => setSearchTerm(e.target.value)} placeholder="Chercher client..." className="w-full p-5 bg-white rounded-3xl border-2 border-slate-100 font-bold outline-none focus:border-indigo-500 text-sm" />
                                    {filteredClients.length > 0 && (
                                        <div className="absolute z-10 w-full mt-3 bg-white border-2 border-indigo-50 rounded-3xl shadow-2xl max-h-60 overflow-y-auto p-2">
                                            {filteredClients.map(c => (
                                                <div key={c.id} onClick={() => { setOrderForm({...orderForm, nom: c.nom, telephone: c.telephone, lieu: c.lieu || ""}); setSearchTerm(""); }} className="p-4 hover:bg-indigo-50 cursor-pointer rounded-2xl">
                                                    <div className="font-black text-slate-800 text-sm uppercase">{c.nom}</div>
                                                    <div className="text-[10px] text-indigo-500 font-bold">{c.telephone}</div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <input value={orderForm.nom} onChange={e => setOrderForm({...orderForm, nom: e.target.value})} placeholder="Nom" className="p-4 bg-white rounded-2xl border border-slate-100 font-bold" />
                                    <input value={orderForm.telephone} onChange={e => setOrderForm({...orderForm, telephone: e.target.value})} placeholder="Téléphone" className="p-4 bg-white rounded-2xl border border-slate-100 font-bold" />
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <input value={orderForm.lieu} onChange={e => setOrderForm({...orderForm, lieu: e.target.value})} placeholder="Lieu" className="p-4 bg-white rounded-2xl border border-slate-100 font-bold" />
                                    <select value={orderForm.source} onChange={e => setOrderForm({...orderForm, source: e.target.value})} className="p-4 bg-white rounded-2xl border border-slate-100 font-bold uppercase text-xs">
                                        <option>Facebook</option><option>TikTok</option>
                                    </select>
                                </div>
                                <div className="relative">
                                    <input type="number" value={orderForm.montant} onChange={e => setOrderForm({...orderForm, montant: e.target.value})} placeholder="0" className="w-full p-6 bg-indigo-600 rounded-[2rem] font-black text-4xl text-white text-center outline-none" />
                                    <span className="absolute right-8 top-1/2 -translate-y-1/2 font-black text-indigo-200">Ar</span>
                                </div>
                                <button onClick={addOrder} className="w-full bg-slate-900 text-white py-6 rounded-[2rem] font-black uppercase tracking-widest shadow-2xl hover:bg-indigo-700">Enregistrer</button>
                            </div>
                        )}

                        {activeTab === 'livraisons' && (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {livraisons.sort((a,b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0)).map(l => (
                                    <div key={l.id} className="glass-card rounded-[2.5rem] p-8 shadow-sm relative overflow-hidden border-2 border-white">
                                        <div className="absolute top-6 right-6">
                                            <SourceIcon source={l.source} />
                                        </div>
                                        <div className="text-[9px] font-black uppercase text-slate-400 mb-6 flex items-center gap-2">
                                            <span className={`w-2 h-2 rounded-full ${l.statut === 'Livré' ? 'bg-emerald-400' : 'bg-indigo-400 animate-pulse'}`}></span>
                                            {l.date} • {l.statut}
                                        </div>
                                        <h3 className="font-black text-xl text-slate-800 uppercase">{l.nom}</h3>
                                        <p className="text-sm text-indigo-600 font-black mb-4">{l.telephone}</p>
                                        <div className="flex justify-between items-center border-t pt-6">
                                            <span className="font-black text-slate-900 text-xl">{Number(l.montant || 0).toLocaleString()} Ar</span>
                                            <div className="flex gap-2">
                                                <button onClick={() => deleteItem('livraisons', l.id)} className="p-2 text-slate-200 hover:text-rose-500"><Icons.Trash2 size={18}/></button>
                                                {l.statut !== 'Livré' && (
                                                    <button onClick={() => updateStatus(l.id, l.statut)} className="bg-slate-900 text-white px-4 py-2 rounded-xl text-[9px] font-black uppercase">
                                                        {l.statut === 'Préparation' ? 'Expédier' : 'Livrer'}
                                                    </button>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {activeTab === 'finances' && (
                            <div className="space-y-8">
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                                    <div className="glass-card p-10 rounded-[3rem]"><div className="text-[10px] font-black text-slate-400 uppercase mb-2">Entrées</div><div className="text-2xl font-black text-emerald-600">+{stats.entrees.toLocaleString()} Ar</div></div>
                                    <div className="glass-card p-10 rounded-[3rem]"><div className="text-[10px] font-black text-slate-400 uppercase mb-2">Dépenses</div><div className="text-2xl font-black text-rose-500">-{stats.depenses.toLocaleString()} Ar</div></div>
                                    <div className="bg-slate-900 p-10 rounded-[3rem] text-white"><div className="text-[10px] font-black uppercase mb-2 opacity-50">Solde</div><div className="text-3xl font-black">{stats.solde.toLocaleString()} Ar</div></div>
                                </div>
                                <div className="glass-card rounded-[3rem] p-10 max-w-lg mx-auto space-y-4">
                                    <h3 className="font-black uppercase text-[10px] text-center mb-4">Nouvelle Dépense</h3>
                                    <input value={depenseForm.motif} onChange={e => setDepenseForm({...depenseForm, motif: e.target.value})} placeholder="Motif" className="w-full p-4 bg-white rounded-2xl border" />
                                    <div className="flex gap-4">
                                        <input type="number" value={depenseForm.montant} onChange={e => setDepenseForm({...depenseForm, montant: e.target.value})} placeholder="Montant" className="flex-1 p-4 bg-white rounded-2xl border" />
                                        <button onClick={addDepense} className="bg-rose-500 text-white px-8 rounded-2xl font-black uppercase text-[10px]">OK</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'clients' && (
                            <div className="space-y-6">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-xl font-black uppercase tracking-tighter">Base Clients</h2>
                                    <button onClick={() => setShowClientForm(!showClientForm)} className="bg-indigo-600 text-white px-6 py-3 rounded-full text-[10px] font-black uppercase flex items-center gap-2 shadow-lg">
                                        <Icons.Plus size={14}/> Nouveau Client
                                    </button>
                                </div>

                                {showClientForm && (
                                    <div className="glass-card rounded-[2rem] p-8 mb-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end shadow-xl border-indigo-100 border-2">
                                        <div><label className="text-[9px] font-black uppercase mb-1 block px-2">Nom</label><input value={clientForm.nom} onChange={e => setClientForm({...clientForm, nom: e.target.value})} className="w-full p-3 bg-white rounded-xl border font-bold text-sm" /></div>
                                        <div><label className="text-[9px] font-black uppercase mb-1 block px-2">Téléphone</label><input value={clientForm.telephone} onChange={e => setClientForm({...clientForm, telephone: e.target.value})} className="w-full p-3 bg-white rounded-xl border font-bold text-sm" /></div>
                                        <div><label className="text-[9px] font-black uppercase mb-1 block px-2">Lieu</label><input value={clientForm.lieu} onChange={e => setClientForm({...clientForm, lieu: e.target.value})} className="w-full p-3 bg-white rounded-xl border font-bold text-sm" /></div>
                                        <div className="flex gap-2">
                                            <select value={clientForm.source} onChange={e => setClientForm({...clientForm, source: e.target.value})} className="flex-1 p-3 bg-white rounded-xl border font-bold text-xs uppercase">
                                                <option>Facebook</option><option>TikTok</option>
                                            </select>
                                            <button onClick={addManualClient} className="bg-slate-900 text-white px-6 py-3 rounded-xl font-black uppercase text-[10px]">Enregistrer</button>
                                        </div>
                                    </div>
                                )}

                                <div className="glass-card rounded-[3rem] overflow-hidden border-2 border-white shadow-sm">
                                    <table className="w-full text-left">
                                        <thead className="bg-slate-100/50 text-[10px] font-black uppercase text-slate-500 border-b">
                                            <tr><th className="p-8">Identité</th><th className="p-8">Lieu</th><th className="p-8">Source</th><th className="p-8 text-right">Actions</th></tr>
                                        </thead>
                                        <tbody className="divide-y divide-slate-100 font-bold uppercase text-sm">
                                            {clients.map(c => (
                                                <tr key={c.id} className="hover:bg-white/50 transition-colors">
                                                    <td className="p-8">
                                                        <div className="text-slate-800">{c.nom}</div>
                                                        <div className="text-[10px] text-indigo-500 tracking-wider font-black">{c.telephone}</div>
                                                    </td>
                                                    <td className="p-8 text-slate-400 text-xs">{c.lieu || '---'}</td>
                                                    <td className="p-8">
                                                        <SourceIcon source={c.source} size={24} />
                                                    </td>
                                                    <td className="p-8 text-right">
                                                        <button onClick={() => deleteItem('clients', c.id)} className="text-slate-200 hover:text-rose-500 p-2 transition-colors"><Icons.Trash2 size={20}/></button>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
